# 动漫与二次元谷子定制分享推荐平台（前端规划文档）

> 本文档面向“动漫与二次元谷子”定制电商与内容分享平台的前端规划与需求设计。当前项目为纯前端 + Mock 数据，但 **Gemini 将集成在后端 Python 服务中**，前端只负责调用 AI 接口并完成交互闭环。后端技术栈调整为 Python，以更适配 AI 能力与 VSCode 开发体验。

---

## 1. 需求分析

### 1.1 项目定位与愿景
本项目是面向“动漫与二次元谷子（周边）”生态的定制电商与内容分享平台，核心不再是单一品类（如手机壳），而是围绕 IP 进行多载体商品的设计、迁移、推荐与交易。

平台定位：
- “IP × 载体 × 设计”的聚合与交易平台
- 设计者、制造商、购买者三方协作的生态
- AI（Gemini）赋能的“跨载体图案迁移 + 文生图 + 设计理解”能力

### 1.2 用户角色与价值
1) 个体设计者（Creator）
- 价值：快速设计、AI 辅助生成、多载体变体、一键发布、流量推荐与收益。
- 需求：设计工具、作品管理、版权声明、收益结算、素材库与风格推荐。

2) 制造商（Manufacturer）
- 价值：对接创意设计与需求；管理订单生产与交付；维护生产规格与材料库。
- 需求：SKU 规格管理、工艺模板、生产状态流转、批量制造与质检流程。

3) 购买者（Buyer）
- 价值：发现喜欢的 IP 或风格，定制属于自己的谷子；获得高匹配推荐。
- 需求：浏览推荐、定制预览、下单与物流、收藏与分享。

4) 平台管理员（Admin）
- 价值：内容安全与版权管理、平台运营与数据分析。
- 需求：用户与内容审核、商品库维护、订单与售后管理、推荐配置。

### 1.3 业务流程概览
1) 设计者上传/生成图案 → Gemini 衍生 → 选择载体 → 生成 SKU → 发布
2) 购买者浏览推荐 → 定制 → 下单
3) 制造商接单 → 生产 → 发货
4) 平台监控版权/审核/数据分析 → 优化推荐与转化

### 1.4 核心功能模块（高层）
1) IP / 主题库
- IP 档案页：授权信息、官方素材、风格标签、热门谷子组合
- 作品关联：IP → 设计 → 商品载体

2) 设计与 AI
- 文生图：输入 IP、风格、配色关键词，生成设计稿
- 图生图（风格迁移）：已有图案 → 新风格或新载体版式
- 跨载体适配：自动调整安全区域、裁切、构图、分辨率
- 生成变体：同一主题多尺寸、多材质、多风格

3) 商品与载体系统
- 载体类型：徽章、亚克力立牌、围巾、帽子、手办、挂件、手机壳等
- 材质/工艺模板：刺绣、热转印、UV 印刷、烫金等

4) 推荐系统（前端表现 + 数据接口预留）
- 风格推荐：基于标签/风格向量
- 内容推荐：基于 IP、主题、热点、季节
- 个性化推荐：用户偏好/浏览/收藏行为

5) 社区与分享
- 设计作品发布与评论
- 开箱与晒单
- 设计挑战、主题活动

6) 交易与订单
- 购物车/下单/订单状态
- 订单流程展示（制造 → 生产 → 发货）

7) 后台管理（前端页面）
- IP / 商品 / 设计 / 用户 / 订单 CRUD
- AI 生成记录与合规审查

### 1.5 非功能需求
- 版权与合规：IP 授权标识、原创声明、审查流程
- 移动端适配：收藏、浏览、定制流程必须流畅
- 性能：作品与大图加载需懒加载、渐进渲染
- 可解释性：推荐结果需给出“为何推荐”的说明

---

## 2. 当前功能理解（基于现有前端）
当前项目为“手机壳定制电商”前端，核心流程：
- 首页展示品牌与样例图
- 上传图片 → 设计（拖拽裁剪） → 预览 → 下单 → Thank You
- 使用 Tailwind + Next.js App Router
- 原有后端连接数据库/支付/登录（已移除）

这些功能将扩展到 “动漫谷子多载体定制平台”。

---

## 3. 额外需求深化理解
用户明确要求：
- 平台面向动漫与二次元谷子，不局限手机壳
- 涉及设计与分享、推荐与个性化
- 三类用户：设计者、制造商、购买者
- AI：文生图、图案迁移、跨载体适配
- 后台要有数据库增删改查（前端管理页）
- 前端页面丰富，具备 LLM 与 AI 体验
- 以 IP 为中心，谷子是载体，设计是桥梁

这些需求决定了系统必须具备：
- “IP-设计-载体”的结构化关系
- 多角色门户与权限隔离
- AI 任务与素材管理入口
- 推荐引擎的可视化与可解释策略
- 前端阶段即完成 Gemini 接入与交互验证

---

## 4. 进一步扩展需求（新增设计）
为保证平台完整性与可运营性，新增以下需求：

1) 设计师收益系统
- 作品分成比例、收益趋势、结算历史

2) 设计协作与共创
- 多人协作编辑、版本控制与版本对比

3) 限量发行与盲盒机制
- 限量系列、时间窗发售、盲盒抽取

4) 版权与授权管理
- 授权文件上传与展示、版权到期提醒

5) AR/3D 预览（前端占位）
- 部分载体支持 3D/AR 模拟佩戴

6) AI 风格资产库
- 预设风格模板、参考图风格卡片

7) 材料与工艺约束模拟
- 根据工艺自动限制颜色/纹理

8) 主题活动与榜单
- 每周/每月 IP 热门榜与设计榜

9) IP 热度预测与趋势提示
- 前端展示“预热视频/讨论热度”标签与推荐提示

10) 版权风险提示
- 上传/生成内容时提示相似度/侵权风险（前端 UX + Mock 提示）

---

## 5. 前端开发计划（Vue3 + Mock 数据）

### 5.1 技术栈规划
- 前端框架：Vue 3 + TypeScript
- 构建工具：Vite
- 路由：Vue Router
- 状态管理：Pinia
- UI & 样式：Tailwind CSS / 或 CSS 变量体系
- Mock 数据：本地 JSON + Mock Service Worker（MSW）
- AI 接口：Gemini（**后端 Python 集成，前端通过 API 调用**）

### 5.1.1 可视化与互动技术（规划用法）
- ECharts：制造商订单看板（产线负载、状态分布、交付趋势）
- Chart.js / ApexCharts：设计者收益、推荐转化曲线
- D3 / Vega-Lite：推荐可解释性（风格向量分布、IP 热度变化）
- Three.js / TresJS：载体 3D 预览（围巾、帽子、立牌 360° 展示）
- PixiJS：2D 动态贴图与图案迁移预览（高性能平面渲染）
- Lottie：AI 生成中的动效、任务完成状态动效
- GSAP：页面切换与设计流程的关键动效（避免过度）
- Mapbox GL / Leaflet：线下展会或制造商分布地图（可选）

### 5.2 目录结构建议
```
src/
  assets/
  components/
  pages/
  router/
  store/
  services/          # API service 层，未来对接 Python 后端
  mocks/             # mock 数据与请求定义
  types/             # DTO 与模型
  utils/
```

### 5.3 页面规划（前端必须实现）
1) 首页
- IP 热门推荐、主题活动、推荐设计
- 入口：AI 生成、热门载体、设计挑战

2) IP 详情页
- IP 描述、授权信息
- 相关设计、载体组合推荐

3) 设计者中心
- 我的作品、AI 生成、收益概览、发布管理

4) 设计工作台（Design Studio）
- 文生图、图生图、跨载体迁移
- 载体选择、安全区域预览
- 生成记录与版本对比

5) 商品与载体浏览页
- 手机壳/围巾/帽子/徽章等分类

6) 商品详情页
- 设计图、载体规格、材质与工艺
- AI 衍生推荐入口

7) 定制流程页
- 选择载体 → 选择设计 → 调整 → 生成预览

8) 推荐中心
- 风格/内容/主题推荐
- 推荐理由可解释卡片

9) 社区分享页
- 作品动态、点赞评论、设计挑战

10) 购买与订单页
- 购物车、结算、订单追踪

11) 制造商门户
- 订单管理、生产状态、规格库

12) 管理后台
- 用户 / IP / 商品 / 订单 / 设计 CRUD

### 5.4 模块拆分与职责
- IP 模块：IP 列表、详情、授权说明
- 设计模块：上传/AI 生成/跨载体适配
- 商品模块：载体 + SKU + 工艺约束
- 推荐模块：风格/内容/主题推荐、解释卡片
- 订单模块：状态流程 + 制造商跟踪
- 社区模块：作品流 + 评论 + 收藏
- AI 模块：Gemini 调用 + 任务状态 + 结果展示

### 5.5 Mock 数据设计（核心实体）
- User：id、role、nickname、tags、favorites
- IP：id、name、licenseType、tags、banner
- Design：id、ipId、creatorId、styleTags、images
- Carrier：id、name、materialOptions、printArea
- SKU：id、carrierId、size、price
- Order：id、userId、skuId、status
- Recommendation：type、sourceTags、score
- AiJob：id、type、prompt、status、resultUrl

### 5.6 面向后端改造的 API 预留
所有前端数据访问统一走 `services/` 层，未来可直接替换为 Python 后端接口。

示例 API（拟定）：
- GET /api/ip
- GET /api/ip/:id
- GET /api/design?ipId=xxx
- POST /api/design
- POST /api/ai/generate
- POST /api/ai/transfer
- GET /api/recommendation?type=style
- GET /api/order
- POST /api/order
- GET /api/admin/users

---

## 6. Gemini 集成方案（后端 Python 集成）

### 6.1 集成目标
- Gemini 由后端 Python 统一接入并暴露 API
- 前端仅调用后端接口完成 UI/UX 验证
- 统一在后端管控 API Key、审计与错误处理

### 6.2 Gemini 功能点（后端能力 + 前端调用）
1) 文生图
- 输入：IP、风格、主题、配色
- 输出：图案预览、风格标签

2) 图生图 / 风格迁移
- 输入：已有图案 + 目标载体规格
- 输出：适配后的图案

3) 跨载体迁移
- 输入：某载体图案 → 新载体（围巾/帽子/徽章）
- 输出：自动版式与可编辑区域

4) 推荐辅助
- 根据设计风格与用户偏好生成推荐描述

### 6.3 Gemini 调用流程（前后端联动）
1) 用户输入 Prompt 或上传图\n2) 前端调用后端 `/api/ai/*` 接口\n3) 后端调用 Gemini 并返回结果\n4) 前端展示结果 + 生成版本

### 6.4 Gemini 安全策略
- API Key 仅在后端配置与管理
- 前端不直接暴露第三方 Key
- 后端负责日志、限流与错误处理

---

## 7. 数据库与后端对接（Python + MySQL 预留）

### 7.1 技术栈建议
- Web 框架：FastAPI（高性能、类型友好，适合 VSCode 开发）
- ORM：SQLAlchemy + Alembic（数据模型与迁移）
- 数据库：MySQL
- 任务队列（可选）：Celery / RQ（用于 AI 生成与批量迁移任务）
- 缓存（可选）：Redis（用于推荐与 AI 结果缓存）

### 7.2 核心数据表
- users (id, role, name, tags, created_at)
- ips (id, name, license_type, tags)
- designs (id, ip_id, creator_id, image_url, style_tags)
- carriers (id, name, material_options, print_area)
- skus (id, carrier_id, size, price)
- orders (id, user_id, sku_id, status, total_price)
- recommendations (id, user_id, target_id, type, score)
- ai_jobs (id, user_id, type, prompt, result_url, status)

### 7.3 Gemini 接入逻辑
- 文生图任务：prompts + IP 风格 + 角色约束
- 图案迁移：source design → target carrier
- AI 生成结果存储至 designs 表

---

## 8. 开发里程碑计划

### Phase 1（1-2 周）
- 前端框架搭建（Vue3 + Router + Pinia）
- 首页、IP 列表、作品列表等基础页面
- Mock 数据框架
- 后端 AI 接口预留与前端调用协议确定

### Phase 2（2-3 周）
- 设计工作台（文生图 / 图生图 / 迁移 UI）
- 载体与 SKU 浏览
- 推荐中心

### Phase 3（2 周）
- 社区分享模块
- 购买与订单流程
- 制造商门户

### Phase 4（1-2 周）
- 管理后台 CRUD
- 数据埋点与推荐解释

### Phase 5（持续优化）
- AI 交互体验优化
- AR/3D 预览（占位）

### Phase 6（后端对接，Python）
- FastAPI 项目骨架与模块划分（auth / ip / design / order / ai）
- 数据库模型与迁移（SQLAlchemy + Alembic）
- 前端 `services/` 对接真实 API

---

## 9. 输出成果清单
- 前端完整 UI 原型 + 功能页面
- Mock API + Mock 数据
- Gemini AI 前端交互闭环
- 前后端接口对接规范
